language: go

go:
    - "1.7"
    - "1.8"
    - "1.9"
    - "1.10"

before_script:
    - GO_FILES=$(find . -iname '*.go' -type f)
    - go get github.com/golang/lint/golint
    - go get honnef.co/go/tools/cmd/megacheck

script:
    - test -z $(gofmt -s -l $GO_FILES)
    - go vet ./...
    - megacheck ./...
    - golint -set_exit_status $(go list ./...)
    - test -z $(go install)
